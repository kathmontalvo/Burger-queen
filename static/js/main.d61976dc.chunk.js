(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/hamburger.b072de2a.png"},21:function(e,t,a){e.exports=a.p+"static/media/lunch-menu.35c633a8.png"},22:function(e,t,a){e.exports=a.p+"static/media/breakfast-menu.8a0caf5d.jpg"},24:function(e,t,a){e.exports=a.p+"static/media/bq.ca5340c0.png"},30:function(e,t,a){e.exports=a(42)},35:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=(a(35),a(36),a(6)),s=a(1),i=a(18),m=a.n(i),u=a(19),d=a(20),p=new(function(){function e(){Object(u.a)(this,e),this.authenticated=!1}return Object(d.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e()}},{key:"logout",value:function(e){this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),f=function(e){var t=e.logoutprop;return r.a.createElement("header",{className:"width-100 mt-2 d-flex height-60"},r.a.createElement("ul",{className:"width-100 nav nav-tabs justify-content-center"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:function(){p.login(function(){t.history.push("/home")})},className:"text-center align-self-start mb-4 border-none transparent cursor"},r.a.createElement("img",{src:m.a,alt:"img",className:"img-fluid max-50"}))),r.a.createElement("li",{className:"nav-item dropdown bars"},r.a.createElement("div",{className:"nav-link dropdown-toggle dropdown-color","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("a",{onClick:function(){p.logout(function(){t.history.push("/")}),localStorage.setItem("token","")}},"Cerrar Sesi\xf3n")))))},g=function(e){var t=e.name,a=e.updateName,n=e.show,c=e.setShow;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(!1)},className:"d-flex align-items-center form-val my-4","data-test-id":"div"},r.a.createElement("label",{className:"my-0 mr-2"},"Cliente: "),!0===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:t,onChange:a,placeholder:"Nombre",className:"name-value form-control"}),r.a.createElement("button",{"data-testid":"submitName",className:"checkBtn ml-3 btn btn-color padding-10 mt-0"},r.a.createElement("i",{className:"fas fa-check"}))),!1===n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"pValue my-0"},t),r.a.createElement("button",{onClick:function(){return c(!0)},className:"checkBtn ml-3 btn btn-color padding-10 mt-0"},"Edit")))},E=function(e){var t=e.data,a=e.menu,n=e.add;return t.filter(function(e){return e.type===a}).map(function(e){return r.a.createElement("div",{className:"card my-3",key:e._id},r.a.createElement("img",{className:"card-img-top",src:e.image,alt:e.name,onClick:function(){n(e._id)}}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name)),r.a.createElement("div",{className:"card-footer justify-content-center"},"S/. ",e.price))})},h=function(e){var t=e.item,a=e.remove,n=e.increase,c=e.decrease;return r.a.createElement("tr",{className:"d-flex width-100 text-align border-bottom my-2"},r.a.createElement("td",{className:"d-flex col-4 text-align-left"},r.a.createElement("button",{onClick:function(){a(t._id)},className:"border-none transparent padding-trash"},r.a.createElement("i",{className:"fas fa-trash-alt text-gray"})),r.a.createElement("p",{className:"my-0 text-gray"},t.name)),r.a.createElement("td",{className:"d-flex col-4 justify-content-center align-items-center"},r.a.createElement("button",{onClick:function(){return c(t._id)},className:"border-none transparent"},r.a.createElement("i",{className:"fas fa-minus-circle blue-color"})),r.a.createElement("span",{className:"text-gray"},t.qty),r.a.createElement("button",{onClick:function(){return n(t._id)},className:"border-none transparent"},r.a.createElement("i",{className:"fas fa-plus-circle blue-color"}))),r.a.createElement("td",{className:"col-4"},r.a.createElement("p",{className:"my-0 text-gray"},"S/. ",t.total)))},v=function(e){var t=e.items,a=e.remove,n=e.increase,c=e.decrease,o=e.postOrder,l=t.reduce(function(e,t){return{total:e.total+t.total}},{total:0});return r.a.createElement("table",{className:"d-flex align-items-center column main-box my-2 col-md-6"},r.a.createElement("thead",{className:"width-100"},r.a.createElement("tr",{className:"d-flex width-100 text-align align-items-center my-2"},r.a.createElement("th",{className:"col-12"},r.a.createElement("h3",null,"Pedido"))),r.a.createElement("tr",{className:"d-flex width-100 text-align background-gray align-items-center my-2"},r.a.createElement("th",{className:"col-4 my-1"},"Nombre"),r.a.createElement("th",{className:"col-4 my-1"},"Cantidad"),r.a.createElement("th",{className:"col-4 my-1"},"Precio"))),r.a.createElement("tbody",{className:"width-100"},t.map(function(e){return r.a.createElement(h,{item:e,key:e._id,remove:a,increase:n,decrease:c})}),r.a.createElement("tr",{className:" d-flex width-100 text-align background-gray align-items-center border-top"},r.a.createElement("td",{className:"col-4 my-1"},"Total:"),r.a.createElement("td",{className:"col-4 my-1 blue-color"},"S/. ",l.total),r.a.createElement("td",{className:"col-4 my-1"},r.a.createElement("button",{onClick:o,className:" btn btn-primary background-blue white-space padding-10"},"Enviar a cocina")))))},b=function(e){var t=e.click,a=e.options,n=e.aClass;return r.a.createElement("li",{className:"nav-item",onClick:t},r.a.createElement("a",{className:n,"data-toggle":"tab",href:"#",role:"tab"},a))},N=function(e,t,a,n){return fetch("http://165.22.166.131:8080/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({userId:n,client:e,products:t})}).then(function(e){return 200===e.status?e.json():400===e.status?Promise.reject({message:"Ingrese productos a la orden"}):401===e.status?Promise.reject({message:"No existe token v\xe1lido"}):Promise.reject({message:e.statusText})})},y=a(29),j=a(27),x={delete:function(e,t){return e.filter(function(e){return e._id!==t})},increase:function(e,t){return e.map(function(e){return e._id}).includes(t)?e.map(function(e){return e._id===t?{_id:t,qty:e.qty+1}:e}):[].concat(Object(j.a)(e),[{_id:t,qty:1}])},decrease:function(e,t){return e.filter(function(e){return e.qty>1}).map(function(e){return e._id}).includes(t)?e.map(function(e){return e._id===t?{_id:t,qty:e.qty-1}:e}):x.delete(e,t)},mix:function(e,t){var a=[];return e.forEach(function(e){return t.forEach(function(t){e._id===t._id&&a.push(Object(y.a)({},e,{qty:t.qty,total:t.qty*e.price}))})}),a}},k=x,w=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("Desayuno"),i=Object(s.a)(l,2),m=i[0],u=i[1],d=Object(n.useState)([]),p=Object(s.a)(d,2),h=p[0],y=p[1],j=Object(n.useState)([]),x=Object(s.a)(j,2),w=x[0],O=x[1],S=Object(n.useState)(!0),C=Object(s.a)(S,2),I=C[0],_=C[1],P=JSON.parse(localStorage.getItem("user"));console.log(P._id);var T=function(e){return function(t){O(e(w,t))}};console.log(w.map(function(e){return{product:e._id,qty:e.qty}}));var D=T(k.increase),q=T(k.decrease),A=T(k.delete);return Object(n.useEffect)(function(){fetch("http://165.22.166.131:8080/products",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){console.log(e),y(e)})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{logoutprop:e}),r.a.createElement("main",{id:"home-menu",className:"container-fluid d-flex flex-wrap align-content-around"},r.a.createElement(g,{name:c,updateName:function(e){o(e.target.value)},show:I,setShow:_}),r.a.createElement("section",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("ul",{className:"nav nav-tabs w-100",role:"tablist"},r.a.createElement(b,{click:function(){return u("Desayuno")},options:"Desayuno",aClass:"nav-link active"}),r.a.createElement(b,{click:function(){return u("Almuerzo")},options:"Almuerzo",aClass:"nav-link"})),r.a.createElement("div",{className:"card-columns"},"Desayuno"===m&&r.a.createElement(E,{data:h,menu:"Desayuno",add:D}),"Almuerzo"===m&&r.a.createElement(E,{data:h,menu:"Almuerzo",add:D}))),r.a.createElement(v,{items:k.mix(h,w),remove:A,decrease:q,increase:D,postOrder:function(){N(c,w.map(function(e){return{product:e._id,qty:e.qty}}),localStorage.getItem("token"),"5d4203b7e96305001250ea9d").then(function(e){console.log(e),O([]),o(""),_(!0)}).catch(console.error)}}))))},O=function(e){var t=e.name,a=e.click,n=e.imgMenu;return r.a.createElement("div",{className:"container-menu",onClick:a},r.a.createElement("img",{src:n,alt:"Menu",className:"img-fluid mb-4 px-2 filter-img"}),r.a.createElement("div",{className:"menu-opts"},t))},S=a(21),C=a.n(S),I=a(22),_=a.n(I),P=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{logoutprop:e}),r.a.createElement("section",{id:"home-menu",className:"container-fluid d-flex flex-wrap align-content-around"},r.a.createElement(O,{click:function(){return p.login(function(){e.history.push("/orders")})},name:"\xd3RDENES",imgMenu:_.a}),r.a.createElement(O,{click:function(){return p.login(function(){e.history.push("/cocina")})},name:"COCINA",imgMenu:C.a})))},T=a(11),D=a.n(T),q=a(23),A=function(e){var t=e.divInput,a=e.type,n=e.value,c=e.label,o=e.update,l=e.placeholder,s=e.icon,i=e.classValue,m=e.visibility;return r.a.createElement("div",{className:t},r.a.createElement("input",{type:a,value:n,onChange:o,className:i,"aria-label":c,placeholder:l,required:!0}),r.a.createElement("div",{className:m},r.a.createElement("div",{className:"btn btn-outline-secondary icon-color border-none radius-50",disabled:!0},r.a.createElement("i",{className:s}))))},z=function(e,t){return fetch("http://165.22.166.131:8080/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(function(e){return 200===e.status?e.json():400===e.status?Promise.reject({message:"Ingrese correctamente su usuario y/o contrase\xf1a"}):Promise.reject({message:e.statusText})})},B=function(e){return fetch("http://165.22.166.131:8080/users/".concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return 200===e.status?e.json():Promise.reject({message:e.statusText})})},F=function(e){var t=e.logprop,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),u=m[0],d=m[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),E=g[0],h=g[1];return r.a.createElement("form",{onSubmit:function(){var e=Object(q.a)(D.a.mark(function e(a){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,z(o,u).then(function(e){e.token&&(p.login(function(){t.history.push("/home")}),localStorage.setItem("token",e.token),console.log(localStorage.getItem("token")))}).catch(function(e){h(e.message)});case 3:B(o).then(function(e){console.log(e),localStorage.setItem("user",JSON.stringify(e))}).catch(console.error);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),className:"col-12 flex-column d-flex form-group","data-testid":"form"},r.a.createElement(A,{divInput:"input-group form-group radius-50 white",type:"email",value:o,label:"Email",update:function(e){return l(e.target.value)},placeholder:"Email",icon:"fas fa-user",classValue:"emailValue form-control border-none radius-50",visibility:"input-group-append border-none radius-50"}),r.a.createElement(A,{divInput:"input-group form-group radius-50 white",type:"password",value:u,label:"Password",update:function(e){return d(e.target.value)},placeholder:"Password",icon:"fas fa-lock",classValue:"passwordValue form-control border-none radius-50",visibility:"input-group-append border-none radius-50"}),r.a.createElement("button",{"data-testid":"login",type:"submit",className:"btn btn-color"},"Ingresar"),E&&r.a.createElement("p",{"data-testid":"errMsg",className:"pt-3 text-danger"},"*",E))},J=function(e){var t=e.imgSrc,a=e.cssClass,n=e.imgClass;return r.a.createElement("div",{className:a},r.a.createElement("img",{src:t,alt:"img",className:n}))},M=a(24),V=a.n(M),G=function(e){return console.log(""),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"container d-flex fill-available justify-content-center align-items-center"},r.a.createElement(J,{imgSrc:V.a,cssClass:"col-lg-6 justify-content-center text-align",imgClass:"img-fluid"}),r.a.createElement("div",{className:"col-lg-6 py-3 d-flex align-items-center form-style flex-column"},r.a.createElement(F,{logprop:e}))))},U=function(e){var t=e.el,a=Object(n.useState)(!0),c=Object(s.a)(a,2),o=c[0],l=c[1];return r.a.createElement("li",{className:"list-group-item"},r.a.createElement("label",{style:{textDecoration:o?"":"line-through"}},r.a.createElement("input",{onChange:function(){return l(!o)},id:t._id,type:"checkbox"}),t.qty," unid. ",t.product.name))},W=function(e,t,a,n,r,c){return fetch("http://165.22.166.131:8080/orders/".concat(c),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({userId:n,client:e,products:t,status:r})}).then(function(e){return 200===e.status?e.json():400===e.status?Promise.reject({message:"Propiedad inv\xe1lida a modificar"}):401===e.status?Promise.reject({message:"No existe token v\xe1lido"}):404===e.status?Promise.reject({message:"Orden inv\xe1lida"}):Promise.reject({message:e.statusText})})},L=function(e,t){return fetch("http://165.22.166.131:8080/orders/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(function(e){return 200===e.status?e.json():401===e.status?Promise.reject({message:"No existe token v\xe1lido"}):404===e.status?Promise.reject({message:"Orden inv\xe1lida"}):Promise.reject({message:e.statusText})})},R=function(e){var t=e.order,a=t.products,c=Object(n.useState)(!0),o=Object(s.a)(c,2),l=o[0],i=o[1],m=Object(n.useState)(0),u=Object(s.a)(m,2),d=u[0],p=u[1];return Object(n.useEffect)(function(){var e=null;return l&&(e=setInterval(function(){p(d+1)},1e3)),function(){return clearInterval(e)}},[l,d]),r.a.createElement("div",{className:" mt-3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"border-card-right pr-2"},t._id),r.a.createElement("div",{className:"pl-2"},t.client)),r.a.createElement("div",null,Math.floor(d/60),":",d%60)),r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",{className:"list-group"},a.map(function(e){return r.a.createElement(U,{el:e,key:e.product.productId})}))),r.a.createElement("div",{className:"input-group card-footer"},r.a.createElement("select",{onChange:function(e){"delivering"===e.target.value||"delivered"===e.target.value?(i(!1),W(t.client,t.products,localStorage.getItem("token"),t.userId,e.target.value,t._id).then(console.log)):"canceled"===e.target.value?L(localStorage.getItem("token"),t._id).then(console.log):"pending"===e.target.value&&(i(!0),W(t.client,t.products,localStorage.getItem("token"),t.userId,e.target.value,t._id).then(console.log))},value:t.status,className:"custom-select",id:"inputGroupSelect02"},r.a.createElement("option",{value:"pending"},"Pending"),r.a.createElement("option",{value:"canceled"},"Canceled"),r.a.createElement("option",{value:"delivering"},"Delivering"),r.a.createElement("option",{value:"delivered"},"Delivered")),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("label",{className:"input-group-text",htmlFor:"inputGroupSelect02"},"Status")))))},$=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)("pending"),i=Object(s.a)(l,2),m=i[0],u=i[1];return Object(n.useEffect)(function(){setInterval(function(){fetch("http://165.22.166.131:8080/orders?page=1&limit=10",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){if(e.length>0)o(e);else{var t=[];c.forEach(function(a){return e.forEach(function(e){a._id!==e._id&&(t.push(e),o(t))})})}console.log(c)})},1e4)},[]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement(f,{logoutprop:e}),r.a.createElement("div",{className:"row w-100"},r.a.createElement("ul",{className:"nav nav-tabs w-100",role:"tablist"},r.a.createElement(b,{click:function(){return u("pending")},options:"Pending",aClass:"nav-link active"}),r.a.createElement(b,{click:function(){return u("delivered")},options:"Delivered",aClass:"nav-link"})),r.a.createElement("section",null,0!==c.length&&c.map(function(e){return"pending"===e.status&&"pending"===m?r.a.createElement(R,{order:e,key:e._id}):"pending"!==e.status&&"delivered"===m?r.a.createElement(R,{order:e,key:e._id}):void 0}).sort(function(e,t){console.log(e,t);var a=e.props.order.dateEntry,n=t.props.order.dateEntry;return new Date(a)>new Date(n)?1:new Date(a)<new Date(n)?-1:0}))))},H=a(28),K=function(e){var t=e.component,a=Object(H.a)(e,["component"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return p.isAuthenticated()||""!==localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},Q=a(9),X=function(){return r.a.createElement(Q.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:G}),r.a.createElement(K,{exact:!0,path:"/orders",component:w}),r.a.createElement(K,{exact:!0,path:"/home",component:P}),r.a.createElement(K,{exact:!0,path:"/cocina",component:$}),r.a.createElement(l.b,{path:"*",component:function(){return"404 NOT FOUND"}})))},Y=function(){return r.a.createElement("div",{className:"container-fluid d-flex col-12 fill-available body-color align-items-center column"},r.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.d61976dc.chunk.js.map